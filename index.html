<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Layered Images</title>
</head>
<body style="margin: 0px; height: 100%; background-color: rgb(14, 14, 14);">
  <canvas id="canvas" style="display: block; -webkit-user-select: none; margin: auto; cursor: zoom-in; background-color: hsl(0, 0%, 90%); transition: background-color 300ms;" width="588" height="735"></canvas>

<script>
var db = [
    ["0x5af0d9827e0c53e4799bb226655a1de152a425a5", "https://www.miladymaker.net/milady/", ".png", "https://i.ibb.co/CJFR0Lx/awp-for-milady.png"],
];
  
var canvas = document.getElementById("canvas");
var context = canvas.getContext("2d");

function getParameterByName(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, "\\$&");
    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, " "));
}

var tokenAddress = getParameterByName('a');
var tokenID = getParameterByName('q');
var gunID = getParameterByName('g');

for (var i = 0; i < db.length; i++) {
    if (db[i][0] === tokenAddress) {
        var tokenTemplate = db[i][1] + tokenID + db[i][2];
        var gunTemplate = db[i][3 + parseInt(gunID)];

        // Load images onto canvas
        var imgToken = new Image();
        imgToken.src = tokenTemplate;
        imgToken.onload = function() {
            context.drawImage(imgToken, 0, 0);
        };

        var imgGun = new Image();
        imgGun.src = gunTemplate;
        imgGun.onload = function() {
            context.drawImage(imgGun, 0, 0);
        };
        break; 
    }
}
</script>
</body>
</html>
